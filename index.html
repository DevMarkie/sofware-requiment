<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Qu·∫£n l√Ω c∆° c·∫•u Phenikaa Uni</title>
  <link rel="stylesheet" href="styles.css" />
  
</head>
<body>
  <header class="app-header">
    <div class="container row-between">
  <h1>Qu·∫£n l√Ω c∆° c·∫•u Phenikaa Uni</h1>
      <nav class="actions row">
        <div class="btn-group">
          <button id="tabOrg" class="btn btn-pill active">C∆° c·∫•u t·ªï ch·ª©c</button>
          <button id="tabEmp" class="btn btn-pill">Nh√¢n s·ª±</button>
          <button id="tabModules" class="btn btn-pill">H·ªçc ph·∫ßn</button>
          <button id="tabPrograms" class="btn btn-pill">CTƒêT</button>
          <button id="tabTuition" class="btn btn-pill">H·ªçc ph√≠</button>
          <button id="tabUsers" class="btn btn-pill">Ng∆∞·ªùi d√πng</button>
        </div>
        <div class="btn-group">
          <button id="btnExport" class="btn">Xu·∫•t JSON</button>
          <label class="btn btn-ghost">
            <input id="fileImport" type="file" accept=".json" hidden />
            Nh·∫≠p JSON
          </label>
          <button id="btnReset" class="btn btn-danger">Kh√¥i ph·ª•c d·ªØ li·ªáu m·∫´u</button>
          <button id="themeToggle" class="btn btn-ghost" title="ƒê·ªïi giao di·ªán">üåó</button>
        </div>
      </nav>
    </div>
  </header>

  <main class="container">
    
    <!-- Section: Organization Manager -->
    <section id="sectionOrg" class="panel">
      <div class="panel-header row-between">
        <h2>C∆° c·∫•u t·ªï ch·ª©c</h2>
        <div class="panel-actions row">
          <input id="orgSearch" class="input" placeholder="T√¨m khoa/b·ªô ph·∫≠n/m√¥n..." style="min-width:220px" />
          <button id="btnClearOrgSearch" class="btn btn-ghost" title="X√≥a t√¨m ki·∫øm">X√≥a</button>
          <button id="btnAddChild" class="btn">Th√™m c·∫•p con</button>
          <button id="btnRename" class="btn btn-ghost">ƒê·ªïi t√™n</button>
          <button id="btnDelete" class="btn btn-danger">Xo√°</button>
        </div>
      </div>
      <div id="orgBreadcrumb" class="breadcrumb"></div>
      <div id="orgTree" class="tree" role="tree"></div>
      <div class="hint">
        <strong>C·∫•u tr√∫c:</strong> ƒê·∫°i h·ªçc ‚Üí Tr∆∞·ªùng ‚Üí Kho√° ‚Üí Chuy√™n ng√†nh ‚Üí M√¥n h·ªçc. Ch·ªçn m·ªôt n√∫t ƒë·ªÉ thao t√°c; d·ªØ li·ªáu l∆∞u <em>localStorage</em>.
      </div>
    </section>

    <!-- Section: Employee Manager -->
    <section id="sectionEmp" class="panel hidden">
      <div class="panel-header row-between">
        <h2>Nh√¢n vi√™n</h2>
        <div class="panel-actions">
          <button id="btnToggleEmpForm" class="btn">Th√™m nh√¢n vi√™n</button>
        </div>
      </div>

      <form id="empForm" class="form hidden" autocomplete="off">
        <input type="hidden" id="empId" />
        <div class="row">
          <label class="field">
            <span>H·ªç t√™n</span>
            <input id="empName" required placeholder="VD: Nguy·ªÖn VƒÉn A" />
          </label>
          <label class="field">
            <span>Ch·ª©c danh</span>
            <input id="empTitle" placeholder="VD: Gi·∫£ng vi√™n" />
          </label>
        </div>
        <div class="row">
          <label class="field">
            <span>B·ªô ph·∫≠n/Thu·ªôc n√∫t</span>
            <select id="empOrgSelect"></select>
          </label>
          <label class="field">
            <span>Tr·∫°ng th√°i</span>
            <select id="empStatus">
              <option value="active">ƒêang l√†m</option>
              <option value="probation">Th·ª≠ vi·ªác</option>
              <option value="onleave">Ngh·ªâ ph√©p</option>
              <option value="inactive">T·∫°m ngh·ªâ</option>
              <option value="resigned">Ngh·ªâ vi·ªác</option>
            </select>
          </label>
        </div>
        <div class="row">
          <label class="field">
            <span>Email</span>
            <input id="empEmail" type="email" placeholder="ten@phenikaa-uni.edu.vn" />
          </label>
          <label class="field">
            <span>ƒêi·ªán tho·∫°i</span>
            <input id="empPhone" placeholder="0xxxxxxxxx" />
          </label>
        </div>
        <div class="row-end">
          <button type="submit" class="btn">L∆∞u</button>
          <button type="button" id="btnCancelEmp" class="btn btn-ghost">Hu·ª∑</button>
        </div>
        <div class="form-note">
          G·ª£i √Ω: Nh√¢n vi√™n s·∫Ω g·∫Øn v·ªõi <strong>n√∫t ƒëang ƒë∆∞·ª£c ch·ªçn</strong> trong C∆° c·∫•u t·ªï ch·ª©c (·ªü tab C∆° c·∫•u t·ªï ch·ª©c).
        </div>
      </form>

      <div class="toolbar row-between">
        <div class="row gap">
          <input id="empSearch" class="input" placeholder="T√¨m theo t√™n, email, ch·ª©c danh‚Ä¶" />
          <button id="btnClearSearch" class="btn btn-ghost" title="Xo√° t√¨m ki·∫øm">Xo√°</button>
          <select id="empStatusFilter" class="input">
            <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
            <option value="active">ƒêang l√†m</option>
            <option value="probation">Th·ª≠ vi·ªác</option>
            <option value="onleave">Ngh·ªâ ph√©p</option>
            <option value="inactive">T·∫°m ngh·ªâ</option>
            <option value="resigned">Ngh·ªâ vi·ªác</option>
          </select>
        </div>
        <div class="row gap">
          <span class="muted">S·∫Øp x·∫øp:</span>
          <button data-sort="name" class="btn btn-ghost sort">T√™n</button>
          <button data-sort="title" class="btn btn-ghost sort">Ch·ª©c danh</button>
          <button data-sort="status" class="btn btn-ghost sort">Tr·∫°ng th√°i</button>
        </div>
      </div>

      <div id="empTable" class="table"></div>
    </section>

    <!-- Section: Module Manager -->
    <section id="sectionModules" class="panel hidden">
      <div class="panel-header row-between">
        <h2>H·ªçc ph·∫ßn <span id="currentCourseLabel" class="muted small"></span></h2>
        <div class="panel-actions row">
          <button id="btnAddModule" class="btn">Th√™m h·ªçc ph·∫ßn</button>
        </div>
      </div>
      <div class="hint small" id="moduleHint">Ch·ªçn m·ªôt M√¥n h·ªçc (type=course) trong C∆° c·∫•u t·ªï ch·ª©c ƒë·ªÉ xem / qu·∫£n l√Ω h·ªçc ph·∫ßn.</div>
      <div class="toolbar row-between">
        <div class="row gap">
          <input id="moduleSearch" class="input" placeholder="T√¨m m√£ / t√™n h·ªçc ph·∫ßn..." />
          <button id="btnClearModuleSearch" class="btn btn-ghost">Xo√°</button>
        </div>
      </div>
      <div id="moduleTable" class="table"></div>
      <form id="moduleForm" class="form hidden" autocomplete="off">
        <input type="hidden" id="moduleId" />
        <div class="row">
          <label class="field">
            <span>M√£</span>
            <input id="moduleCode" placeholder="VD: HCI-LT" />
          </label>
          <label class="field">
            <span>T√™n h·ªçc ph·∫ßn</span>
            <input id="moduleName" required placeholder="VD: L√Ω thuy·∫øt HCI" />
          </label>
          <label class="field">
            <span>T·ªïng t√≠n ch·ªâ</span>
            <input id="moduleCredits" type="number" min="0" value="0" placeholder="VD: 3" />
          </label>
        </div>
        <div class="row">
          <label class="field">
            <span>T√≠n ch·ªâ l√Ω thuy·∫øt</span>
            <input id="moduleTheoryCredits" type="number" min="0" value="0" placeholder="VD: 2" />
          </label>
          <label class="field">
            <span>T√≠n ch·ªâ th·ª±c h√†nh</span>
            <input id="modulePracticeCredits" type="number" min="0" value="0" placeholder="VD: 1" />
          </label>
          <label class="field">
            <span>Khoa qu·∫£n l√Ω</span>
            <select id="moduleDepartment"></select>
          </label>
        </div>
        <div class="row">
          <label class="field">
            <span>HP ti√™n quy·∫øt</span>
            <input id="modulePrereq" placeholder="Nh·∫≠p m√£, c√°ch nhau b·ªüi d·∫•u ph·∫©y" />
          </label>
          <label class="field">
            <span>HP song h√†nh</span>
            <input id="moduleCoreq" placeholder="Nh·∫≠p m√£, c√°ch nhau b·ªüi d·∫•u ph·∫©y" />
          </label>
          <label class="field">
            <span>HP h·ªçc tr∆∞·ªõc</span>
            <input id="modulePrior" placeholder="Nh·∫≠p m√£, c√°ch nhau b·ªüi d·∫•u ph·∫©y" />
          </label>
        </div>
        <div class="row-end">
          <button type="submit" class="btn">L∆∞u</button>
          <button type="button" id="btnCancelModule" class="btn btn-ghost">Hu·ª∑</button>
        </div>
        <div class="form-note">T·ªïng t√≠n ch·ªâ t·ª± ƒë·ªông b·∫±ng t·ªïng LT + TH n·∫øu ƒë·ªÉ tr·ªëng. Nh·∫≠p danh s√°ch m√£ b·∫±ng d·∫•u ph·∫©y ho·∫∑c xu·ªëng d√≤ng.</div>
      </form>
    </section>

    <!-- Section: User Manager -->
    <section id="sectionUsers" class="panel hidden">
      <div class="panel-header row-between">
        <h2>Ng∆∞·ªùi d√πng h·ªá th·ªëng</h2>
        <div class="panel-actions">
          <button id="btnToggleUserForm" class="btn">Th√™m ng∆∞·ªùi d√πng</button>
        </div>
      </div>

      <form id="userForm" class="form hidden" autocomplete="off">
        <input type="hidden" id="userId" />
        <div class="row">
          <label class="field">
            <span>T√™n ƒëƒÉng nh·∫≠p</span>
            <input id="userUsername" required placeholder="VD: admin" />
          </label>
          <label class="field">
            <span>H·ªç v√† t√™n</span>
            <input id="userFullName" placeholder="VD: Nguy·ªÖn VƒÉn B" />
          </label>
        </div>
        <div class="row">
          <label class="field">
            <span>Email</span>
            <input id="userEmail" type="email" placeholder="ten@phenikaa-uni.edu.vn" />
          </label>
          <label class="field">
            <span>Vai tr√≤</span>
            <select id="userRole">
              <option value="admin">Qu·∫£n tr·ªã</option>
              <option value="academic">H·ªçc v·ª•</option>
              <option value="lecturer">Gi·∫£ng vi√™n</option>
              <option value="viewer">Xem</option>
            </select>
          </label>
          <label class="field">
            <span>Tr·∫°ng th√°i</span>
            <select id="userStatus">
              <option value="active">Ho·∫°t ƒë·ªông</option>
              <option value="inactive">T·∫°m kho√°</option>
            </select>
          </label>
        </div>
        <div class="row-end">
          <button type="submit" class="btn">L∆∞u</button>
          <button type="button" id="btnCancelUser" class="btn btn-ghost">Hu·ª∑</button>
        </div>
        <div class="form-note">T√†i kho·∫£n d√πng cho vi·ªác ph√¢n quy·ªÅn v√† truy c·∫≠p n·ªôi b·ªô.</div>
      </form>

      <div class="toolbar row-between">
        <div class="row gap">
          <input id="userSearch" class="input" placeholder="T√¨m theo t√™n ƒëƒÉng nh·∫≠p, h·ªç t√™n, email..." />
          <button id="btnClearUserSearch" class="btn btn-ghost">Xo√°</button>
        </div>
        <div class="row gap">
          <select id="userRoleFilter" class="input">
            <option value="all">T·∫•t c·∫£ vai tr√≤</option>
            <option value="admin">Qu·∫£n tr·ªã</option>
            <option value="academic">H·ªçc v·ª•</option>
            <option value="lecturer">Gi·∫£ng vi√™n</option>
            <option value="viewer">Xem</option>
          </select>
          <select id="userStatusFilter" class="input">
            <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
            <option value="active">Ho·∫°t ƒë·ªông</option>
            <option value="inactive">T·∫°m kho√°</option>
          </select>
        </div>
      </div>

      <div id="userTable" class="table"></div>
    </section>

    <!-- Section: Training Program Manager -->
    <section id="sectionPrograms" class="panel hidden">
      <div class="panel-header row-between">
        <h2>Ch∆∞∆°ng tr√¨nh ƒë√†o t·∫°o (CTƒêT)</h2>
        <div class="panel-actions">
          <button id="btnToggleProgramForm" class="btn">Th√™m CTƒêT</button>
        </div>
      </div>

      <form id="programForm" class="form hidden" autocomplete="off">
        <input type="hidden" id="programId" />
        <div class="row">
          <label class="field">
            <span>T√™n ch∆∞∆°ng tr√¨nh</span>
            <input id="programName" required placeholder="VD: CTƒêT KTPM 2025" />
          </label>
          <label class="field">
            <span>Chuy√™n ng√†nh</span>
            <select id="programMajor"></select>
          </label>
          <label class="field">
            <span>NƒÉm h·ªçc</span>
            <input id="programYear" placeholder="VD: 2025-2026" />
          </label>
        </div>
        <div class="row">
          <label class="field">
            <span>Danh s√°ch h·ªçc ph·∫ßn (m√£, c√°ch nhau b·ªüi d·∫•u ph·∫©y ho·∫∑c xu·ªëng d√≤ng)</span>
            <textarea id="programModules" class="input" rows="3" placeholder="VD: CLOUD-LT, CLOUD-TH, HCI-LT"></textarea>
          </label>
        </div>
        <div class="row-end">
          <button type="submit" class="btn">L∆∞u</button>
          <button type="button" id="btnCancelProgram" class="btn btn-ghost">Hu·ª∑</button>
        </div>
        <div class="form-note">M√£ h·ªçc ph·∫ßn l·∫•y theo danh m·ª•c ·ªü tab H·ªçc ph·∫ßn. H·ªá th·ªëng t·ª± t√≠nh s·ªë t√≠n ch·ªâ & h·ªçc ph√≠ d·ª± ki·∫øn.</div>
      </form>

      <div class="toolbar row-between">
        <div class="row gap">
          <input id="programSearch" class="input" placeholder="T√¨m theo t√™n CTƒêT, nƒÉm h·ªçc..." />
          <button id="btnClearProgramSearch" class="btn btn-ghost">Xo√°</button>
        </div>
        <div class="row gap">
          <span id="programCount" class="muted small"></span>
        </div>
      </div>

      <div id="programTable" class="table"></div>
    </section>

    <!-- Section: Tuition Calculator -->
    <section id="sectionTuition" class="panel hidden">
      <div class="panel-header row-between">
        <h2>T√≠nh to√°n h·ªçc ph√≠</h2>
      </div>
      <div class="grid two">
        <div class="stack gap-s">
          <form id="tuitionRatesForm" class="form" autocomplete="off">
            <div class="row">
              <label class="field">
                <span>Ch·ªçn CTƒêT</span>
                <select id="tuitionProgramSelect"></select>
              </label>
            </div>
            <div class="row">
              <label class="field">
                <span>ƒê∆°n gi√° LT (VND/t√≠n ch·ªâ)</span>
                <input id="tuitionRateTheory" type="number" min="0" step="5000" />
              </label>
              <label class="field">
                <span>ƒê∆°n gi√° TH (VND/t√≠n ch·ªâ)</span>
                <input id="tuitionRatePractice" type="number" min="0" step="5000" />
              </label>
            </div>
            <div class="form-note">√Åp d·ª•ng m·ª©c ph√≠ cho t·ª´ng h·ªçc ph·∫ßn d·ª±a tr√™n t√≠n ch·ªâ l√Ω thuy·∫øt / th·ª±c h√†nh.</div>
          </form>
          <div id="tuitionModuleTable" class="table"></div>
          <div class="hint" id="tuitionSummary"></div>
        </div>
        <form id="tuitionQuickForm" class="form" autocomplete="off">
          <div class="row">
            <label class="field">
              <span>T·ªïng t√≠n ch·ªâ</span>
              <input id="tuitionQuickCredits" type="number" min="0" step="1" />
            </label>
            <label class="field">
              <span>ƒê∆°n gi√° / t√≠n ch·ªâ</span>
              <input id="tuitionQuickRate" type="number" min="0" step="1000" />
            </label>
          </div>
          <div class="row-end">
            <button type="submit" class="btn">T√≠nh</button>
            <button type="button" id="btnResetQuickTuition" class="btn btn-ghost">Xo√°</button>
          </div>
          <div class="form-note" id="tuitionQuickResult">Nh·∫≠p s·ªë li·ªáu ƒë·ªÉ xem t·ªïng h·ªçc ph√≠ d·ª± ki·∫øn.</div>
        </form>
      </div>
    </section>
  </main>

  <footer class="container muted small">
    <p>¬© 2025 ‚Äî Vanilla JS ‚Ä¢ L∆∞u c·ª•c b·ªô (localStorage) ‚Ä¢ Xu·∫•t/Nh·∫≠p JSON ƒë·ªÉ sao l∆∞u.</p>
  </footer>

  <script type="module" src="js/main.js"></script>
</body>
</html>
