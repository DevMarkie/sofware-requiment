/* =============================================================
   Modern UI Theme System
   - Light & Dark palettes
   - Soft elevation + motion tokens
   ============================================================= */
:root{
  /* Base palette */
  --color-bg: #f5f7fb;
  --color-surface: #ffffff;
  --color-surface-alt:#f0f4f9;
  --color-ink: #0f172a;
  --color-ink-soft:#334155;
  --color-muted:#64748b;
  --color-border:#e2e8f0;
  --color-border-strong:#cbd5e1;
  --color-brand:#2563eb;
  --color-brand-accent:#1d4ed8;
  --color-brand-soft:#e0efff;
  --color-danger:#dc2626;
  --color-danger-accent:#b91c1c;
  --color-danger-soft:#fee2e2;
  --color-warn:#d97706;
  --color-warn-soft:#fef3c7;
  --color-ok:#059669;
  --color-ok-soft:#d1fae5;
  --ring:#cfe4ff;
  --shadow-xs:0 1px 2px rgba(15,23,42,.08),0 0 0 1px rgba(15,23,42,.02);
  --shadow-sm:0 2px 4px rgba(15,23,42,.08),0 0 0 1px rgba(15,23,42,.04);
  --shadow-md:0 6px 16px -2px rgba(15,23,42,.12),0 2px 4px rgba(15,23,42,.06);
  --shadow-lg:0 10px 28px -4px rgba(15,23,42,.16),0 4px 8px rgba(15,23,42,.10);
  --radius-xs:4px;--radius-sm:6px;--radius:10px;--radius-lg:14px;--radius-xl:18px;--radius-pill:999px;
  --ease: cubic-bezier(.4,.0,.2,1);
  --ease-out: cubic-bezier(0,0,.2,1);
  --ease-in: cubic-bezier(.4,0,1,1);
  --transition-fast:120ms var(--ease);
  --transition-med:200ms var(--ease);
  --transition-slow:380ms var(--ease);
  --focus-ring: 0 0 0 3px var(--ring);
  --gradient-app: radial-gradient(circle at 0 0, #ffffff 0%, #f5f7fb 70%);
}

[data-theme="dark"]{
  --color-bg:#0b1220;
  --color-surface:#0f172a;
  --color-surface-alt:#162033;
  --color-ink:#e2e8f0;
  --color-ink-soft:#cbd5e1;
  --color-muted:#8ca3bf;
  --color-border:#1e293b;
  --color-border-strong:#324258;
  --color-brand:#60a5fa;
  --color-brand-accent:#3b82f6;
  --color-brand-soft:#1e3a8a;
  --color-danger:#f87171;
  --color-danger-accent:#ef4444;
  --color-danger-soft:#7f1d1d;
  --color-warn:#fbbf24;
  --color-warn-soft:#78350f;
  --color-ok:#34d399;
  --color-ok-soft:#064e3b;
  --ring:rgba(96,165,250,.4);
  --gradient-app: radial-gradient(circle at 0 0, #132034 0%, #0b1220 70%);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font:14px/1.55 Inter, system-ui,-apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Helvetica Neue";
  color:var(--color-ink);
  background:var(--gradient-app);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  min-height:100vh;
}
[data-theme="dark"] body{ background:var(--color-bg); }
.container{max-width:1100px;margin:0 auto;padding:16px}
.row-between{display:flex;align-items:center;justify-content:space-between;gap:12px}
.row{display:flex;gap:12px;align-items:stretch}
.row-end{display:flex;gap:8px;justify-content:flex-end}
.grid.two{display:grid;grid-template-columns:1fr 1fr;gap:16px}
@media (max-width:960px){.grid.two{grid-template-columns:1fr}}
.hidden{display:none !important}

.app-header{position:sticky;top:0;background:rgba(255,255,255,.8);backdrop-filter: blur(12px);border-bottom:1px solid var(--color-border);z-index:20}
[data-theme="dark"] .app-header{background:rgba(15,23,42,.75)}
h1{margin:8px 0;font-size:21px;font-weight:600;letter-spacing:.5px;display:flex;align-items:center;gap:8px}
h1::before{content:"🎓";font-size:20px;filter:grayscale(.1)}
h2{margin:4px 0 0 0;font-size:18px;font-weight:600;letter-spacing:.3px}
.small{font-size:12px}
.muted{color:var(--muted)}

/* Hero */
.app-hero{padding:28px 0 14px}
.app-hero h1{font-size:28px; margin:0 0 4px}
.app-hero .btn-group{margin-top:10px}


.panel{background:var(--color-surface);border:1px solid var(--color-border);border-radius:var(--radius-xl); padding:18px 18px 20px; box-shadow: var(--shadow-md); position:relative;overflow:hidden}
.panel::before{content:"";position:absolute;inset:0;pointer-events:none;background:linear-gradient(120deg,transparent 0%,rgba(99,102,241,.08) 60%,transparent 100%);opacity:.4}
[data-theme="dark"] .panel{background:linear-gradient(145deg,#0f172a 0%,#111f33 90%);box-shadow: var(--shadow-sm)}
.panel-header{margin-bottom:8px}
.panel-actions .btn{margin-left:6px}
.breadcrumb{margin:4px 0 10px;color:var(--muted);font-size:12px}
.breadcrumb .lvl{display:inline-block;background:#eef2ff;color:#1e293b;border:1px dashed #c7d2fe;border-radius:999px;padding:2px 8px;margin-right:6px}
[data-theme="dark"] .breadcrumb .lvl{background:#1f2937;color:#e5e7eb;border-color:#334155}

.tree{border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:8px 8px 10px;background:linear-gradient(145deg,var(--color-surface) 0%,var(--color-surface-alt) 120%);max-height:420px;overflow:auto;scrollbar-gutter:stable;border-top-width:2px;}
[data-theme="dark"] .tree{background:linear-gradient(160deg,#17263a 0%,#0f172a 80%);}
.tree .node{display:flex;align-items:center;gap:8px;padding:6px 10px;border-radius:var(--radius);cursor:pointer;line-height:1.3;font-size:13px;position:relative;font-weight:500;color:var(--color-ink-soft);}
.tree .node:hover{background:rgba(99,102,241,.08);color:var(--color-ink)}
[data-theme="dark"] .tree .node:hover{background:rgba(99,102,241,.18);color:var(--color-ink)}
.tree .node.active{background:linear-gradient(90deg,var(--color-brand-soft) 0%,rgba(99,102,241,.05) 100%);border:1px solid rgba(99,102,241,.35);color:var(--color-ink);box-shadow:0 2px 4px -1px rgba(0,0,0,.15)}
[data-theme="dark"] .tree .node.active{background:linear-gradient(90deg,rgba(59,130,246,.35) 0%,rgba(59,130,246,.10) 100%);}
.tree .children{margin-left:18px;border-left:2px dashed var(--color-border);padding-left:10px}
[data-theme="dark"] .tree .children{border-left-color:#2a3a52}
/* highlight for matched text */
.tree mark{background:linear-gradient(90deg,rgba(147,197,253,.55),rgba(191,219,254,.4));color:#0f172a;padding:0 2px;border-radius:3px}
[data-theme="dark"] .tree mark{background:linear-gradient(90deg,rgba(59,130,246,.6),rgba(147,197,253,.35));color:#fff}

.btn{appearance:none;border:1px solid var(--color-border);background:linear-gradient(#ffffff,#f2f6fa);padding:8px 14px;border-radius:var(--radius-pill);cursor:pointer;transition:var(--transition-fast);font-weight:500;letter-spacing:.3px;line-height:1;position:relative;user-select:none}
[data-theme="dark"] .btn{background:linear-gradient(#18273b,#142132);border-color:var(--color-border);color:var(--color-ink-soft)}
.btn:hover{border-color:var(--color-border-strong);box-shadow:var(--shadow-xs)}
.btn:active{transform:translateY(1px)}
.btn-ghost{background:transparent}
.btn.active{border-color:var(--color-brand);background:var(--color-brand-soft);color:var(--color-ink)}
[data-theme="dark"] .btn.active{background:rgba(59,130,246,.25);color:var(--color-ink)}
.btn-primary{background:linear-gradient(95deg,var(--color-brand) 0%,var(--color-brand-accent) 90%);border-color:var(--color-brand-accent);color:#fff;box-shadow:0 4px 12px -2px rgba(37,99,235,.55)}
.btn-primary:hover{filter:brightness(1.05)}
.btn-pill{border-radius:var(--radius-pill);padding:9px 16px}
.btn-group{display:flex;gap:8px}
.btn-danger{background:linear-gradient(95deg,var(--color-danger) 0%,var(--color-danger-accent) 90%);border-color:var(--color-danger-accent);color:#fff;box-shadow:0 4px 12px -2px rgba(220,38,38,.45)}
.btn-danger:hover{filter:brightness(1.06)}

.input, input, select{border:1px solid var(--color-border);padding:9px 12px;border-radius:var(--radius);background:#fff;outline:none;transition:var(--transition-fast);font:inherit;line-height:1.3}
[data-theme="dark"] .input,
[data-theme="dark"] input,
[data-theme="dark"] select{background:#0f172a;color:var(--color-ink);border-color:var(--color-border)}
.input:hover, input:hover, select:hover{border-color:var(--color-border-strong)}
.input:focus, input:focus, select:focus{border-color:var(--color-brand);box-shadow:var(--focus-ring)}

.form{border:1px solid var(--color-border);border-radius:var(--radius-lg);padding:14px 16px;margin:12px 0;background:linear-gradient(135deg,var(--color-surface) 0%,var(--color-surface-alt) 110%);position:relative}
[data-theme="dark"] .form{background:linear-gradient(135deg,#152236 0%,#0f172a 95%)}
.form.hidden{display:none}
.field{display:flex;flex-direction:column;gap:4px;flex:1}
.field span{color: var(--muted); font-size:12px;}
.form-note{margin-top:6px;color:var(--muted);font-size:12px}

.toolbar{margin:8px 0 10px}
.gap{gap:8px}

.table{border:1px solid var(--color-border);border-radius:var(--radius-xl);overflow:auto;background:linear-gradient(155deg,var(--color-surface) 0%,var(--color-surface-alt) 150%);}
.table table{width:100%;border-collapse:separate;border-spacing:0}
.table thead th{position:sticky;top:0;background:linear-gradient(#f1f5f9,#e2e8f0);border-bottom:1px solid var(--color-border);padding:11px 12px;text-align:left;font-weight:600;font-size:12px;letter-spacing:.5px;color:#334155;z-index:5}
[data-theme="dark"] .table thead th{background:linear-gradient(#1f2e44,#1a2435);color:var(--color-ink-soft)}
.table tbody td{border-top:1px solid var(--color-border);padding:10px 12px;vertical-align:top;font-size:13px}
.table tbody tr:hover td{background:rgba(99,102,241,.05)}
[data-theme="dark"] .table tbody tr:hover td{background:rgba(59,130,246,.10)}
.table-foot{padding:8px 12px;color:var(--color-muted);border-top:1px solid var(--color-border);background:linear-gradient(#f8fafc,#eef2f6)}
[data-theme="dark"] .table-foot{background:#0f172a;color:var(--color-muted)}
.badge{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:var(--radius-pill);border:1px solid var(--color-border);font-size:11px;font-weight:500;letter-spacing:.3px;box-shadow:var(--shadow-xs);backdrop-filter:blur(4px);}
.chip-group{display:flex;flex-wrap:wrap;gap:4px;margin:4px 0}
.chip-pair{display:flex;flex-wrap:wrap;gap:4px}
.chip{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:var(--radius-pill);border:1px solid var(--color-border);background:var(--color-surface-alt);font-size:11px;font-weight:500;letter-spacing:.2px;line-height:1.2}
.chip-label{background:var(--color-brand-soft);border-color:var(--color-brand);color:var(--color-ink)}
.chip-mono{background:var(--color-surface-alt);color:var(--color-ink)}
.text-center{text-align:center}
.text-right{text-align:right}
.badge.green{background:var(--color-ok-soft);border-color:#34d399;color:#065f46}
.badge.gray{background:#f1f5f9;border-color:#e2e8f0;color:var(--color-ink)}
.badge.blue{background:#dbeafe;border-color:#3b82f6;color:#1e3a8a}
.badge.amber{background:#fef3c7;border-color:#f59e0b;color:#92400e}
.badge.red{background:#fee2e2;border-color:#ef4444;color:#7f1d1d}

.actions .btn{margin-left:6px}
.hint{margin-top:10px;color:var(--muted);font-size:12px}
.action-links{display:flex;gap:6px}
.action-link{color:var(--brand);cursor:pointer;text-decoration:underline}
[data-theme="dark"] .action-link{color:var(--brand)}

/* Toast */
#toast{position:fixed;right:12px;bottom:12px;display:flex;flex-direction:column;gap:10px;z-index:99}
.toast-item{background:#111827;color:#fff;padding:11px 14px;border-radius:var(--radius-lg);box-shadow:0 6px 24px -2px rgba(0,0,0,.45);opacity:.96;transition:transform var(--transition-med), opacity var(--transition-med), filter var(--transition-med);backdrop-filter:blur(6px);font-size:13px;font-weight:500;letter-spacing:.4px}
.toast-item.ok{background:linear-gradient(120deg,#065f46,#047857)}
.toast-item.warn{background:linear-gradient(120deg,#7f1d1d,#991b1b)}
.toast-item.hide{opacity:0;transform:translateY(10px) scale(.98);filter:blur(1px)}

/* Focus styles for keyboard users */
*:focus-visible{outline:2px solid var(--brand); outline-offset:2px}

/* Scrollbar polish (Chromium/Edge) */
.tree::-webkit-scrollbar{height:12px;width:10px}
.tree::-webkit-scrollbar-thumb{background:color-mix(in srgb, var(--ink) 15%, transparent);border-radius:8px;border:2px solid transparent;background-clip:padding-box}
.tree::-webkit-scrollbar-track{background:transparent}

/* --- Overrides: improve dark mode readability --- */
/* Text colors use theme variables so dark mode stays readable */
.breadcrumb{ color: var(--muted); }
.field span{ color: var(--muted); }
.form-note{ color: var(--muted); }
.hint{ color: var(--muted); }
.action-link{ color: var(--brand); }

/* Ensure active pill buttons keep readable text in dark */
[data-theme="dark"] .btn.active{ color: var(--ink); }

/* Badges: avoid dark text on dark bg in dark mode */
.badge.gray{ color: var(--ink); }
[data-theme="dark"] .badge{ border-color:#334155; color: var(--ink); }
[data-theme="dark"] .badge.gray{ background:#1f2937; }
[data-theme="dark"] .badge.blue{ background:#1e3a8a; border-color:#3b82f6; color:#dbeafe; }
[data-theme="dark"] .badge.green{ background:#064e3b; border-color:#065f46; color:#d1fae5; }
[data-theme="dark"] .badge.amber{ background:#78350f; border-color:#f59e0b; color:#fde68a; }
[data-theme="dark"] .badge.red{ background:#7f1d1d; border-color:#ef4444; color:#fecaca; }
[data-theme="dark"] .chip{background:#1f2937;border-color:#334155;color:var(--ink)}
[data-theme="dark"] .chip-label{background:#1e3a8a;border-color:#3b82f6;color:#e2e8f0}

/* Tree: subtle branch line in dark */
[data-theme="dark"] .tree .children{ border-left-color:#334155; }

/* Highlight mix compatibility */
.tree mark{ background: color-mix(in srgb, var(--brand) 30%, #fff6); }

/* Scrollbar color mix compatibility */
.tree::-webkit-scrollbar-thumb{ background: color-mix(in srgb, var(--ink) 15%, transparent); }

/* --- UI polish: icons & inputs --- */
/* Button layout for icons */
.btn{ display:inline-flex; align-items:center; gap:8px; }

/* Add simple emoji icons for key actions */
#tabOrg::before{ content:"🏛️"; }
#tabEmp::before{ content:"👤"; }
#btnExport::before{ content:"⬇️"; }
.actions label.btn.btn-ghost::before{ content:"⬆️"; }
#btnReset::before{ content:"♻️"; }
/* keep theme icon as-is, but ensure spacing */
.app-header .container.row-between{justify-content:flex-start;gap:18px;flex-wrap:wrap}
.app-header .actions{margin-left:0}
#themeToggle{ display:inline-flex; align-items:center; justify-content:center; width:40px; }

/* Search inputs with icon */
#orgSearch,#empSearch{
  padding-left:36px;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2394a3b8'><path d='M10 4a6 6 0 100 12 6 6 0 000-12zm10.71 15.29l-4.4-4.4a8 8 0 10-1.41 1.41l4.4 4.4a1 1 0 001.41-1.41z'/></svg>");
  background-repeat:no-repeat;
  background-position:10px 50%;
  background-size:18px 18px;
}

/* --- Dark mode button high-contrast overrides (solid colors) --- */
[data-theme="dark"] .btn{ color: var(--ink); border-color:#334155; }
[data-theme="dark"] .btn:hover{ border-color:#475569; }
[data-theme="dark"] .btn-ghost{ color: var(--ink); }

/* Active pill/tab in dark: deep blue bg, bright text */
[data-theme="dark"] .btn.active{
  background:#1e3a8a; /* blue-900 */
  border-color:#3b82f6; /* blue-500 */
  color:#e5e7eb; /* slate-200 */
}

/* Primary and danger variants in dark */
[data-theme="dark"] .btn-primary{
  background:#1e3a8a;
  border-color:#3b82f6;
  color:#e5e7eb;
}
[data-theme="dark"] .btn-danger{
  background:#7f1d1d;
  border-color:#ef4444;
  color:#fecaca;
}

/* Inputs: improve dark border and placeholder */
[data-theme="dark"] .input,
[data-theme="dark"] input,
[data-theme="dark"] select{
  border-color:#334155;
}
[data-theme="dark"] .input:hover,
[data-theme="dark"] input:hover,
[data-theme="dark"] select:hover{
  border-color:#475569;
}
::placeholder{ color: var(--muted); }
input::placeholder, .input::placeholder, textarea::placeholder{ color: var(--muted); }

/* Utility classes */
.fx-fade-in{animation:fade-in .4s var(--ease-out)}
@keyframes fade-in{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
/* Flash highlight / pop animations for new or updated items */
.anim-flash{animation:flash-pulse 1.2s ease-out}
@keyframes flash-pulse{0%{box-shadow:0 0 0 0 rgba(59,130,246,.9);background:rgba(59,130,246,.25)}60%{box-shadow:0 0 0 8px rgba(59,130,246,0);background:rgba(59,130,246,.12)}100%{box-shadow:0 0 0 0 rgba(59,130,246,0);background:transparent}}
.anim-pop{animation:row-pop .55s var(--ease)}
@keyframes row-pop{0%{background:rgba(250,204,21,.65);transform:scale(.98)}70%{background:rgba(250,204,21,.25)}100%{background:transparent;transform:scale(1)}}

/* Tab buttons icons */
#tabOrg::before{content:"🏛️";}
#tabEmp::before{content:"�";}
#tabModules::before{content:"📘";}
#tabUsers::before{content:"🛠️";}
#tabPrograms::before{content:"📚";}
#tabTuition::before{content:"💰";}

/* ================= Sidebar Layout ================= */
.app-shell{display:flex;align-items:stretch;min-height:calc(100vh - 70px);max-width:100%;}
.sidebar{width:250px;background:linear-gradient(180deg,var(--color-surface) 0%,var(--color-surface-alt) 160%);border-right:1px solid var(--color-border);display:flex;flex-direction:column;padding:14px 14px 12px;gap:16px;position:sticky;top:70px;max-height:calc(100vh - 70px);overflow:auto;scrollbar-width:thin}
[data-theme="dark"] .sidebar{background:linear-gradient(180deg,#111f32 0%,#0f172a 120%)}
.sidebar-head{font-weight:600;font-size:14px;letter-spacing:.5px;color:var(--color-ink-soft);text-transform:uppercase;opacity:.85}
.logo-text{font-size:15px;font-weight:600;color:var(--color-brand);letter-spacing:.6px}
[data-theme="dark"] .logo-text{color:var(--color-brand)}
.nav{display:flex;flex-direction:column;gap:4px;margin-top:4px}
.nav-item{background:transparent;border:1px solid transparent;color:var(--color-ink-soft);text-align:left;padding:9px 12px;border-radius:var(--radius);cursor:pointer;font:inherit;display:flex;align-items:center;gap:10px;font-size:13px;transition:var(--transition-fast)}
.nav-item:hover{background:rgba(99,102,241,.12);color:var(--color-ink)}
[data-theme="dark"] .nav-item:hover{background:rgba(99,102,241,.25);color:var(--color-ink)}
.nav-item.active{background:linear-gradient(90deg,var(--color-brand-soft),transparent);border:1px solid rgba(99,102,241,.35);color:var(--color-ink);font-weight:600;box-shadow:0 2px 6px -2px rgba(0,0,0,.3)}
[data-theme="dark"] .nav-item.active{background:linear-gradient(90deg,rgba(59,130,246,.4),rgba(59,130,246,.08));}
.sidebar-section{display:flex;flex-direction:column;gap:8px}
.sidebar-label{font-size:11px;font-weight:600;letter-spacing:.7px;text-transform:uppercase;color:var(--color-muted);margin:4px 2px 0}
.stack{display:flex;flex-direction:column}
.gap-s{gap:6px}
.small-btn{padding:6px 10px;font-size:12px;border-radius:var(--radius);justify-content:flex-start}
.file-label{display:inline-flex;align-items:center;cursor:pointer}
.grow{flex:1}
.sidebar-footer{display:flex;flex-direction:column;gap:6px}
.content{flex:1;min-width:0;padding:22px 26px 40px;display:flex;flex-direction:column;gap:28px;}
@media (max-width:1000px){
  .app-shell{flex-direction:column}
  .sidebar{position:relative;width:100%;flex-direction:row;overflow:auto;max-height:none;top:0;border-right:none;border-bottom:1px solid var(--color-border);padding:10px 12px;gap:14px}
  .sidebar-section{flex-direction:row;align-items:center}
  .sidebar-label{display:none}
  .stack{flex-direction:row;flex-wrap:wrap}
  .content{padding:18px 14px}
}

/* Search input icons */
#orgSearch,#empSearch,#moduleSearch{
  padding-left:38px;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2364748b'><path d='M10 4a6 6 0 100 12 6 6 0 000-12zm10.71 15.29l-4.4-4.4a8 8 0 10-1.41 1.41l4.4 4.4a1 1 0 001.41-1.41z'/></svg>");
  background-repeat:no-repeat;
  background-position:11px 50%;
  background-size:19px 19px;
}
[data-theme="dark"] #orgSearch,[data-theme="dark"] #empSearch,[data-theme="dark"] #moduleSearch{background-color:#0f172a}

/* Animations on hover for action links */
.action-link{position:relative;overflow:hidden}
.action-link::after{content:"";position:absolute;left:0;bottom:0;height:1px;width:100%;background:currentColor;transform:scaleX(0);transform-origin:left;transition:transform var(--transition-fast)}
.action-link:hover::after{transform:scaleX(1)}

/* Focus visible */
*:focus-visible{outline:none;box-shadow:var(--focus-ring)}

/* Scrollbar */
.tree::-webkit-scrollbar{height:12px;width:10px}
.tree::-webkit-scrollbar-thumb{background:rgba(100,116,139,.35);border-radius:8px;border:2px solid transparent;background-clip:padding-box}
.tree::-webkit-scrollbar-thumb:hover{background:rgba(100,116,139,.55)}
.tree::-webkit-scrollbar-track{background:transparent}

/* ================= Floating Action Menu (FAB) ================= */
.fab{position:fixed;right:18px;bottom:20px;z-index:120;display:flex;flex-direction:column;align-items:flex-end;gap:10px}

/* ================= Adaptive Org Panel Scrolling ================= */
/* Khi danh sách cây quá dài, đảm bảo khu vực cây cuộn độc lập và không đẩy footer xuống quá xa */
#sectionOrg{
  display:flex;
  flex-direction:column;
  max-height:calc(100vh - 160px); /* chừa header + margin */
  overflow:hidden; /* tránh panel tự kéo dài vượt viewport */
}
#sectionOrg .panel-header, #sectionOrg .breadcrumb, #sectionOrg .hint{flex:0 0 auto}
#sectionOrg #orgTree{
  flex:1 1 auto;
  overflow:auto;
  /* bỏ giới hạn cứng 420px nếu chiều cao cho phép */
  max-height:none;
  min-height:180px;
}
/* Trường hợp màn hình rất thấp (<=600px) thu nhỏ padding & chiều cao tối đa */
@media (max-height:600px){
  #sectionOrg{max-height:calc(100vh - 120px)}
  #sectionOrg #orgTree{min-height:140px}
}
.fab-btn{background:linear-gradient(135deg,var(--color-brand) 0%,var(--color-brand-accent) 90%);color:#fff;border:none;box-shadow:0 10px 24px -4px rgba(37,99,235,.55),0 4px 10px rgba(37,99,235,.35);width:54px;height:54px;border-radius:50%;font-size:22px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:600;transition:var(--transition-fast)}
.fab-btn:hover{filter:brightness(1.08);transform:translateY(-2px)}
.fab-btn:active{transform:translateY(0)}
.fab-panel{width:260px;max-height:70vh;overflow:auto;padding:14px 14px 16px;background:linear-gradient(155deg,var(--color-surface) 0%,var(--color-surface-alt) 120%);border:1px solid var(--color-border);border-radius:18px;box-shadow:var(--shadow-lg);backdrop-filter:blur(10px);animation:fade-in .25s var(--ease-out)}
[data-theme="dark"] .fab-panel{background:linear-gradient(165deg,#112033 0%,#0f172a 90%);}
.fab-panel.hidden{display:none}
.fab-group{margin-bottom:14px}
.fab-group:last-child{margin-bottom:0}
.fab-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.7px;color:var(--color-muted);margin:0 2px 6px}
.fab-item{width:100%;text-align:left;background:rgba(255,255,255,.6);border:1px solid var(--color-border);color:var(--color-ink-soft);padding:8px 10px;margin:4px 0;border-radius:10px;font:500 13px/1.3 inherit;display:flex;align-items:center;gap:8px;cursor:pointer;backdrop-filter:blur(4px);transition:var(--transition-fast);position:relative}
[data-theme="dark"] .fab-item{background:rgba(15,23,42,.75);color:var(--color-ink-soft)}
.fab-item:hover{background:var(--color-brand-soft);color:var(--color-ink);border-color:var(--color-brand);box-shadow:0 2px 6px -1px rgba(0,0,0,.18)}
[data-theme="dark"] .fab-item:hover{background:rgba(59,130,246,.35);}
.fab-item.danger{background:var(--color-danger-soft);border-color:rgba(220,38,38,.4);color:var(--color-danger-accent)}
[data-theme="dark"] .fab-item.danger{background:#7f1d1d;color:#fca5a5}
.fab-item.danger:hover{background:linear-gradient(95deg,var(--color-danger) 0%,var(--color-danger-accent) 90%);color:#fff;border-color:var(--color-danger-accent)}
.fab-item input[type=file]{display:none}
@media (max-width:740px){
  .fab-panel{width:88vw;right:0}
}
